[{setup, [{data_dir, "/var/lib/ergw"},
	  {log_dir,  "/var/log/gtp-c-node"}				%% NOTE: lager is not using this
	 ]},

 {ergw, [{dp_handler, ngc_dp},
	 {sockets,
	  [{irx, [{type, 'api'}
		 ]},
	   {grx, [{type, 'gtp-u'},
		  {node, 'ng-core-dp@vlx174-tpmd'},
		  {name, 'grx'},
		  {'pcc-rules',
		   [{<<"service01">>, 10, <<"0.0.0.0/0 0.0.0.0/0 0 : 65535 0 : 65535 0x0/0x0">>},
		    {<<"service02">>, 20, <<"0.0.0.0/0 0.0.0.0/0 0 : 65535 0 : 65535 0x0/0x0">>},
		    {<<"service03">>, 30, <<"0.0.0.0/0 0.0.0.0/0 0 : 65535 0 : 65535 0x0/0x0">>}
		   ]},
		  {'default-ul-pcc-rule', <<"service01">>},
		  {'default-dl-pcc-rule', <<"service01">>}
		 ]}
	  ]},

	 {vrfs,
	  [{upstream, [{pools,  [{{10, 180, 0, 1}, {10, 180, 255, 254}, 32},
				 {{16#8001, 0, 0, 0, 0, 0, 0, 0}, {16#8001, 0, 0, 16#FFFF, 0, 0, 0, 0}, 64}
				]},
		       {'MS-Primary-DNS-Server', {8,8,8,8}},
		       {'MS-Secondary-DNS-Server', {8,8,4,4}},
		       {'MS-Primary-NBNS-Server', {127,0,0,1}},
		       {'MS-Secondary-NBNS-Server', {127,0,0,1}}
		      ]}
	  ]},

	 {handlers,
	  [{'h1', [{handler, scg_ipoe},
		   {protocol, ipoe},
		   {sockets, [irx]},
		   {data_paths, [grx]},
		   {rules, [{<<"online">>, {[<<"UL#1">>, <<"UL#2">>], [<<"UL#1">>, <<"UL#2">>]}}]},
		   {aaa, [{'Username',
			   [{default, ['IMSI', <<"@">>, 'APN']}]}]}
		  ]}
	  ]},

	 {apns,
	  [{[<<"tpip">>, <<"net">>], [{vrf, upstream}]},
	   {[<<"APN1">>], [{vrf, upstream}]}
	  ]}
	]},

 {ergw_aaa, [
	     {ergw_aaa_provider, {ergw_aaa_mock, [{shared_secret, <<"MySecret">>}]}},
	     %% {ergw_aaa_provider,
	     %%  {ergw_aaa_radius,
	     %%   [{nas_identifier,<<"ac1.ac.tplab">>},
	     %% 	{radius_auth_server,{{172,20,16,75},1812,<<"secret">>}},
	     %% 	{radius_acct_server,{{172,20,16,75},1813,<<"secret">>}}
	     %%   ]}
	     %% }
	     %% {ergw_aaa_provider, {ergw_aaa_diameter_gx, []}},
	     %% {apis,
	     %%  [{ergw_aaa_gx,
	     %% 	[{host, <<"ergw-ng-core.tpip.net">>},
	     %% 	 {realm, <<"tpip.net">>},
	     %% 	 {connect_to, <<"aaa://dmock;transport=sctp">>}
	     %% 	]}
	     %%  ]}
	    ]},

 {dhcp, [
	 {server_id, {192,168,101,2}},
	 %%{next_server, {47,80,19,32}}.
	 {interface, <<"ens193">>},
	 {authoritative, true},
	 {lease_file, "/var/run/dhcp_leases.dets"},
	 {session, scg_dhcp_session},

	 %% Hub subnet
	 {subnets, [
		    {subnet,
		     {192,168,101,0},                     %% Network
		     {255,255,255,0},                     %% Netmask
		     {{192,168,101,32},{192,168,101,99}}, %% Range
		     [{1,{255,255,255,0}},                %% Subnet Mask
		      {28,{192,168,101,255}},             %% Broadcast Address
		      {3,[{192,168,101,1}]},              %% Routers
		      {15,"ngcore"},                      %% Domain Name
		      {6,[{192,168,2,1}]},                %% Domain Name Servers
		      {51,3600}]}                         %% Address Lease Time
		   ]}
	]},

 {jobs, [{samplers,
	  [{cpu_feedback, jobs_sampler_cpu, []}
	  ]},
	 {queues,
	  [{path_restart,
	    [{regulators, [{counter, [{limit, 100}]}]},
	     {modifiers,  [{cpu_feedback, 10}]} %% 10 = % increment by which to modify the limit
	    ]},
	   {create,
	    [{max_time, 5000}, %% max 5 seconds
	     {max_size, 4},
	     {regulators, [{rate, [{limit, 2}]}]},
	     {modifiers,  [{cpu_feedback, 10}]} %% 10 = % increment by which to modify the limit
	    ]},
	   {delete,
	    [{regulators, [{counter, [{limit, 100}]}]},
	     {modifiers,  [{cpu_feedback, 10}]} %% 10 = % increment by which to modify the limit
	    ]},
	   {other,
	    [{max_time, 10000}, %% max 10 seconds
	     {regulators, [{rate, [{limit, 1000}]}]},
	     {modifiers,  [{cpu_feedback, 10}]} %% 10 = % increment by which to modify the limit
	    ]}
	  ]}
	]},

 {lager, [
	  {log_root, "/var/log/gtp-c-node"},
	  {colored, true},
	  {handlers, [
		      {lager_console_backend, debug},
		      {lager_file_backend, [{file, "error.log"}, {level, error}]},
		      {lager_file_backend, [{file, "console.log"}, {level, debug}]}
		     ]},
          {extra_sinks,
           [
            {ngc,
             [{handlers, [
			  {lager_console_backend, debug}
			 ]}
	     ]}
	   ]}
	 ]}
].
